<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title id="title"></title>

    <script language="javascript">AC_FL_RunContent = 0;</script>
    <script src="AC_RunActiveContent.js" language="javascript"></script>	
    <!-- Framework CSS -->
    <!-- Enable Browser History by replacing useBrowserHistory tokens with two hyphens -->
        <!-- BEGIN Browser History required section -->
        <link rel="stylesheet" type="text/css" href="history/history.css" />
        <script type="text/javascript" src="history/history.js"></script>
	<link rel="stylesheet" href="css/screen.css" type="text/css" media="screen, projection">
	<link rel="stylesheet" href="css/wowza.css" type="text/css" />
	
	<!-- grab the page name and save as pageTitle -->
	<script>
		//split the URL by "/", grab last piece ("PAGENAME.html")
		var pageTitle = window.location.href.toString().split("/");
		//split by ".", grab first piece ("PAGENAME")
		pageTitle = pageTitle[pageTitle.length-1].split(".")[0];
    
    //CHANGE THIS. THIS IT THE TITLE OF THE PAGE
    var pageName = "Board of Regents - Live Stream";  //title the appears above video and on the tab
    
    function getPageTitle() {
        return pageTitle;
    }
	</script>
	
	<!-- check to see if HLS is supported -->
    <script>
        function supports_hls_video()
        {
            if (videoObj.canPlayType)
            {
                if (videoObj.canPlayType('application/x-mpegURL'))
                {
                    if(videoObj.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"') )
                    {
                        return true;
                    }
                }
            }
            return false;
        }
    </script>
    
    <!-- display flash player -->
    <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript">
            // For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection.
            var swfVersionStr = "10.2.0";
            // To use express install, set to playerProductInstall.swf, otherwise the empty string.
            var xiSwfUrlStr = "playerProductInstall.swf";
            var flashvars = {};
            var params = {};
            params.quality = "high";
            params.bgcolor = "#ffffff";
            params.allowscriptaccess = "sameDomain";
            params.allowfullscreen = "true";
            var attributes = {};
            attributes.id = "Live";
            attributes.name = "Live";
            attributes.align = "middle";
            swfobject.embedSWF(
                               pageTitle+".swf", "flashContent",
                               "540", "425",
                               swfVersionStr, xiSwfUrlStr,
                               flashvars, params, attributes);
            // JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
            swfobject.createCSS("#flashContent", "display:block;text-align:left;");
    </script>
</head>

<body>
	<div class="container">
	
		<!-- HEADER -->
        <div class="span-18">
            <h1 id="header"></h1>
      	</div>
      	
        <div class="span-6 last">
            <img src="img/Header_emu-logo.png" class="logo" width="227" height="84"/>
		</div>
        <hr class="heading">
		<!-- END HEADER -->
		
		<!-- EXAMPLE PLAYER: WIDTH of this player should be 630px, height(354) will vary depending on the example-->
        <div class="span-16">
        
        	<!-- if HLS is NOT supported -->
        	<div id="notsupported">
				<!-- SWFObject's dynamic embed method replaces this alternative HTML content with Flash content when enough
            	 JavaScript and Flash plug-in support is available. The div is initially hidden so that it doesn't show
            	 when JavaScript is disabled.
            	 -->
    			<div id="flashContent">
            	    <p>
            		    To view this page ensure that Adobe Flash Player version
            		    10.2.0 or greater is installed.
            	    </p>
            		<script type="text/javascript">
                	    var pageHost = ((document.location.protocol == "https:") ? "https://" : "http://");
                	    document.write("<a href='http://www.adobe.com/go/getflashplayer'><img src='"
                                + pageHost + "www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a>" );
                	</script>
    			</div>
            
    			<p>
  				<noscript>
    			<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="655" height="700" id="Live">
    		  		<param name="movie" value="Live.swf" />
    		  		<param name="quality" value="high" />
    		  		<param name="bgcolor" value="#ffffff" />
    		  		<param name="allowScriptAccess" value="sameDomain" />
    		  		<param name="allowFullScreen" value="true" />
    			  	<!--[if !IE]>-->
    			<object type="application/x-shockwave-flash" data="Live.swf" width="655" height="700">
    		    	<param name="quality" value="high" />
    		    	<param name="bgcolor" value="#ffffff" />
    		    	<param name="allowScriptAccess" value="sameDomain" />
    		    	<param name="allowFullScreen" value="true" />
    		    <!--<![endif]-->
    		    <!--[if gte IE 6]>-->
    		    <p>
    		      Either scripts and active content are not permitted to run or Adobe Flash Player version
    		      10.2.0 or greater is not installed.
    		    </p>
    		    <!--<![endif]-->
    		    	<a href="http://www.adobe.com/go/getflashplayer">
    		      	<img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash Player" />
    		      	</a>
    		    <!--[if !IE]>-->
    		  	</object>
    		  	<!--<![endif]-->
    			</object>
    			</noscript>
        	</div>
        
        	<!-- if HLS is supported -->
        	<div id="supported">
            <div>
              <style>
                video {
                  background-color: #000000;
                }
              </style>
              <video id="videoObj" x-webkit-airplay="allow" controls alt="Example File" width="630" height="480"  onerror="failed(event)" oncanplay="canPlay()"/>
            </div>
            <table style="display:none;">
              <tr>
                <td>
                  <button id="playObj" type="button" style="width:60px" onClick="JavaScript:playControl()" disabled="disabled">Pause</button>
                </td>
                <td/>
              </tr>
              <tr>
                <td align="right">
                  <b>Stream:</b>
                </td>
                <td>
                  <input id="connectStr" size = "80" type="text" placeholder="" value=""/>
                  <script>
                    //set HLS link to be the same as the page title
                    document.getElementById("connectStr").value="http://164.76.124.33:1935/live/" + pageTitle + "/playlist.m3u8";
                  </script>
                  <button id="connectObj" type="button" style="width:80px" onClick="JavaScript:connect()">Connect</button>
                </td>
              </tr>
              <tr>
                <td align="right">
                  <b>Status:</b>
                </td>
                <td>
                  <lable id="statusStr" size = "100" type="text" placeholder="" value=""/>
                </td>
              </tr>
            </table>
        	</div>
            
			<!-- Player checking -->
			<script>
													//check if HLS video is supported
				if ( supports_hls_video() ) {		//if HLS is supported
					notsupported.style.display="none";
				}
				else {								//if HLS ins't supported
					supported.style.display="none";
					videoObj.style.display="none";
				}
				function connect() {
					if(connectObj.textContent == "Disconnect") {
						connectObj.textContent = "Connect";
						playObj.disabled = "disabled";
						playObj.textContent = 'Pause';
						videoObj.pause();
						videoObj.src=null;
						videoObj.load();
						statusStr.textContent = "";
					}
					else {
						connectObj.textContent = "Disconnect";
						playObj.disabled = "";
						statusStr.textContent = "";
						videoObj.src = connectStr.value;
						videoObj.load();
					}
				}
				function canPlay() {
					playControl();
				}
				function playControl() {
					if (videoObj.paused == false) {
						videoObj.pause();
						playObj.textContent = 'Play';
					} 
					else {
						videoObj.play();
						statusStr.textContent="Playing";
						playObj.textContent = 'Pause';
					}
				}
				function failed(e) {
					// video playback failed - show a message saying why
					switch (e.target.error.code) {
						case e.target.error.MEDIA_ERR_ABORTED:
						statusStr.textContent='You aborted the video playback.';
						break;
						case e.target.error.MEDIA_ERR_NETWORK:
						statusStr.textContent='A network error caused the video download to fail part-way.';
						break;
						case e.target.error.MEDIA_ERR_DECODE:
						statusStr.textContent='The video playback was aborted due to a corruption problem or because the video used features your browser did not support.';
						break;
						case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:
						statusStr.textContent= 'The video could not be loaded, either because the server or network failed or because the format is not supported.';
						break;
						default:
						statusStr.textContent = 'An unknown error occurred.';
						break;
					}
				}
			</script>
            
        </div>
        
        
		<!-- SIDEBAR --><h3>To play on an iOS device</h3>
            <h3><a href="" id="ios link">Click Here!</a></h3>
            <script>
            	//set iOS link to be the same as the page title
            	document.getElementById("ios link").href="http://164.76.124.33:1935/live/" + pageTitle + "/playlist.m3u8";
              
              //set title of page
              document.getElementById("title").innerHTML = pageName;
              document.getElementById("header").innerHTML = pageName;
			  document.getElementById('connectObj').click();
            </script>
		<!-- FOOTER -->
      	<div class="span-24">
            <hr class="heading">
            <div class="span-1">
            	<img src="img/icon-company.png" width="34" height="35" />
            </div>
            <div class="span-23 last copyright">
                &nbsp;&#169;&nbsp;2013 Wowza Media Systems, LLC. All rights reserved.
            </div>
        </div>
		<!-- END FOOTER -->
	</div>
</body>
</html>
